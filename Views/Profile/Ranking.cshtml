@using CookBook.Models
@using System.Security.Claims
@model IEnumerable<dynamic> 
@{
    ViewData["Title"] = "Ranking Global de Chefs";
    int rank = 0;
    string currentUserId = ViewBag.CurrentUserId as string ?? "";
}

<h1 class="text-center">ğŸ† Ranking Global de Chefs</h1>
<p class="text-center text-muted">Baseado no nÃºmero total de curtidas recebidas.</p>
<hr />

<div class="table-responsive">
    <table class="table table-hover table-striped">
        <thead class="table-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Nome de UsuÃ¡rio</th>
                <th scope="col" class="text-center">NÃ­vel</th>
                <th scope="col" class="text-center">Curtidas Recebidas</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var userEntry in Model)
            {
                rank++;
                // ğŸ’¡ CondiÃ§Ã£o para destacar o usuÃ¡rio logado
                bool isCurrentUser = userEntry.Id == currentUserId;
                
                <tr class="@(isCurrentUser ? "table-primary fw-bold" : "")">
                    <th scope="row">
                        @(rank == 1 ? "ğŸ¥‡" : rank == 2 ? "ğŸ¥ˆ" : rank == 3 ? "ğŸ¥‰" : rank.ToString())
                    </th>
                    <td>
                        @userEntry.UserName
                        @if (isCurrentUser)
                        {
                            <span class="badge bg-primary ms-2">VocÃª</span>
                        }
                    </td>
                    <td class="text-center">
                        @userEntry.Level
                    </td>
                    <td class="text-center">
                        <i class="fas fa-heart text-danger me-1"></i> @userEntry.TotalLikesReceived
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@if (!Model.Any())
{
    <div class="alert alert-warning text-center">
        Nenhum usuÃ¡rio encontrado no ranking. Comece a criar receitas!
    </div>
}